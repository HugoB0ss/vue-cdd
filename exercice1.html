<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>RH Helper</title>

    <style>
    /* Hide un-compiled mustache bindings
    until the Vue instance is ready */

    [v-cloak] {
      display: none;
    }

    
    </style>

</head>
<body>
<div id="main">
<form v-cloak>
	<div class="row">
	//need to import bootstrap
		<div class="col-md-6">
			<label for="startDate">Start date</label>
			<input id="startDate" type="date" v-model="start">
		</div>
		<div class="col-md-6">
			<label for="endDate">End date</label>
			<input id="endDate" type="date" v-model="end" >
		</div>
		<div class="col-md-6">
			<label for="nbHours">Worked hours per week</label>
			<input id="nbHours" type="number" v-model="nbHours" >
		</div>
	</div>
	<div class="row">
		<input type="button" value="compute" @click="compute">
	</div>
</form>
<p v-if="computed !== ''">{{computed}} vacation days</p>
<p v-if="duration !== ''">Duration in days : {{duration}} days</p>
<p v-if="duration !== ''">Duration in hours : {{(duration/7) * nbHours }} hours</p>
<p v-if="etp !== ''"> ETP : {{etp}}</p>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.0.5/vue.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.20.1/moment.min.js"></script>
<script>
var demo = new Vue({
    el: '#main',
    data: { 
		start:'',
		end:'',
		nbHours:'',
		duration:'',
		computed:'',
		etp:''
    },
	methods: {
		compute : function(){
			if(this.nbHours){
				this.etp = Math.round(this.nbHours/35*100)/100
			}
			if(this.start !== '' && this.end !== ''){
				let startD = moment(this.start)
				let endD = moment(this.end)
				this.duration = moment.duration(endD.diff(startD)).asDays()+1
				let result = Math.ceil(Math.trunc((this.duration) / 28) * 2.08);
				this.computed = result >= 25 ? 25 : result;
			}
		}
	}
});
	
</script>
</body>
</html>
